# å­¦ä¹ æ—¥å¿— | 2026å¹´1æœˆ20æ—¥ 

**é¡¹ç›®åç§°ï¼š** AI-Study-2026 (CS è½¬ç ä¸ç®—æ³•å·¥ç¨‹å¸ˆè¿›é˜¶)
**ä»Šæ—¥ä¸»é¢˜ï¼š** RAG æ ¸å¿ƒé“¾è·¯æ‰“é€šã€API æ·±åº¦è°ƒå‚ã€é˜²å¾¡æ€§ç¼–ç¨‹å®æˆ˜ã€ç®—æ³•æ€ç»´å¼€å¯

---

## ğŸ“… ä»Šæ—¥è¿›åº¦æ¦‚è§ˆ
ä»Šå¤©å®Œæˆäº†ä»â€œç¯å¢ƒé…ç½®â€åˆ°â€œå·¥ç¨‹å®ç°â€çš„è·¨è¶Šã€‚ä¸ä»…è·‘é€šäº†é¦–ä¸ª RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ) åŸå‹ï¼Œè¿˜æ·±å…¥ç†è§£äº†å¦‚ä½•é€šè¿‡ä»£ç å‚æ•°æ§åˆ¶ AI è¡Œä¸ºï¼Œå¹¶æ­£å¼å¯åŠ¨äº† LeetCode ç®—æ³•åœ°åŸºå·¥ç¨‹ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. ç¯å¢ƒæ’éšœï¼šç½‘ç»œç¯å¢ƒä¸ API å†²çª
* **ç°è±¡**ï¼šå‡ºç° `Request timed out` (è¯·æ±‚è¶…æ—¶) é”™è¯¯ã€‚
* **åŸå› **ï¼šVPN/åŠ é€Ÿå™¨å¹²æ‰°äº†ä¸é˜¿é‡Œäº‘æœåŠ¡å™¨çš„ç›´è¿è·¯å¾„ã€‚
* **è§£å†³**ï¼šå…³é—­ VPN åæˆåŠŸå®ç°â€œå¤§è„‘è¿æ¥â€ï¼ŒéªŒè¯äº† API Key çš„æœ‰æ•ˆæ€§ã€‚

### 2. API æ·±åº¦è°ƒå‚ï¼šæ“æ§ AI çš„â€œçµé­‚â€
æŒæ¡äº† OpenAI æ ‡å‡†åè®®ä¸‹çš„æ ¸å¿ƒå‚æ•°è°ƒèŠ‚ï¼š
* **`temperature` (æ¸©åº¦)**ï¼šæ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ã€‚RAG åœºæ™¯è®¾ä¸º `0` æˆ– `0.1` ä»¥è¿½æ±‚ç»“æœçš„ä¸¥è°¨ä¸ç¡®å®šæ€§ã€‚
* **`max_tokens` (æœ€å¤§é•¿åº¦)**ï¼šé™åˆ¶ç”Ÿæˆé•¿åº¦ï¼Œèµ·åˆ°èŠ‚çœ Token é¢åº¦å’Œé˜²æ­¢å†—ä½™è¾“å‡ºçš„ä½œç”¨ã€‚
* **`messages` è§’è‰²æ¨¡å‹**ï¼šæ˜ç¡®äº† `system` (è®¾äººè®¾)ã€`user` (å‘æŒ‡ä»¤) å’Œ `assistant` (å­˜ä¸Šä¸‹æ–‡) çš„åˆ†å·¥ã€‚

### 3. API å“åº”è§£æï¼šå‰¥æ´‹è‘±å¼æå–
é’ˆå¯¹æ ¸å¿ƒè¯­å¥ `print(completion.choices[0].message.content)` çš„æ·±åº¦æ‹†è§£ï¼š
* **`completion`**ï¼šAPI è¿”å›çš„å®Œæ•´å“åº”å¯¹è±¡ï¼ŒåŒ…å« Token æ¶ˆè€—ã€æ¨¡å‹ä¿¡æ¯ç­‰å…ƒæ•°æ®ã€‚
* **`.choices`**ï¼šå“åº”é€‰é¡¹åˆ—è¡¨ã€‚ç”±äºæ¨¡å‹æ”¯æŒä¸€æ¬¡ç”Ÿæˆå¤šä¸ªå€™é€‰ç­”æ¡ˆï¼ˆn > 1ï¼‰ï¼Œå› æ­¤é‡‡ç”¨æ•°ç»„ç»“æ„ã€‚
* **`[0]`**ï¼šè®¿é—®åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªï¼ˆé»˜è®¤ä¸»å›å¤ï¼‰å…ƒç´ ã€‚
* **`.message`**ï¼šè¿›å…¥è¯¥é€‰é¡¹çš„æ¶ˆæ¯å±‚çº§ï¼ŒåŒ…å« `role` (è§’è‰²) å’Œ `content` (å†…å®¹)ã€‚
* **`.content`**ï¼šæœ€ç»ˆæå–å‡ºçš„ AI çº¯æ–‡æœ¬å›å¤å†…å®¹ã€‚
  
### 4. å·¥ä¸šçº§è§„èŒƒï¼šé˜²å¾¡æ€§è°ƒç”¨ (Defensive Programming)

ä¸ºäº†åº”å¯¹ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒå’Œå¤æ‚çš„ API å“åº”ï¼Œä»Šæ—¥ä»£ç ä¸­å¼•å…¥äº†ä¸¤ä¸ªæ ¸å¿ƒé˜²å¾¡æ€§é€»è¾‘ï¼Œç¡®ä¿ç¨‹åºåœ¨å¼‚å¸¸æƒ…å†µä¸‹ä¸ä¼šç›´æ¥å´©æºƒã€‚
#### **é˜²å¾¡æ€§ Aï¼šæ¡ä»¶åˆ¤æ–­æ£€æŸ¥ (`if` é€»è¾‘)**
```python
if completion and completion.choices:
    # æå–å›ç­”å†…å®¹
```

#### **é˜²å¾¡æ€§ Bï¼šå¼‚å¸¸æ•è·æœºåˆ¶ (try...except é€»è¾‘)**
```python
try:
    # å‘èµ· API è°ƒç”¨
except Exception as e:
    print(f"è¯·æ±‚å¤±è´¥ï¼š{e}")
```
### 5. RAG æ ¸å¿ƒé€»è¾‘å®ç° (æœ€ç®€é—­ç¯)
å®ç°äº†é¦–ä¸ªèƒ½è¯»å–æœ¬åœ°ç§æœ‰çŸ¥è¯†çš„æ™ºèƒ½ä½“è„šæœ¬ï¼š
* **æµç¨‹**ï¼š`æœ¬åœ°æ–‡ä»¶è¯»å–` -> `Prompt ä¸Šä¸‹æ–‡æ³¨å…¥` -> `æ¨¡å‹æ¨ç†ç”Ÿæˆ`ã€‚
* **å®è´¨æ„ä¹‰**ï¼šç†è§£äº† RAG æ˜¯å¦‚ä½•é€šè¿‡å¤–éƒ¨æ•°æ®è§£å†³å¤§æ¨¡å‹â€œæ— å®æ—¶è®°å¿†â€å’Œâ€œå¹»è§‰â€é—®é¢˜çš„ã€‚

---

## ğŸ’» ä»Šæ—¥ä»£ç æ•´åˆ (`test_ai.py`)
```python
import os
from openai import OpenAI

# 1. åˆå§‹åŒ–å®¢æˆ·ç«¯
client = OpenAI(
    api_key=os.getenv("DASHSCOPE_API_KEY"),
    base_url="[https://dashscope.aliyuncs.com/compatible-mode/v1](https://dashscope.aliyuncs.com/compatible-mode/v1)"
)

# 2. è¯»å–æœ¬åœ°çŸ¥è¯†åº“ (RAG ç¬¬ä¸€æ­¥)
with open("knowledge.txt", "r", encoding="utf-8") as f:
    local_knowledge = f.read()

# 3. æ„é€ ç»“æ„åŒ– Prompt
prompt = f"è¯·å‚è€ƒèƒŒæ™¯çŸ¥è¯†å›ç­”ï¼š\n{local_knowledge}\né—®é¢˜ï¼šæˆ‘2026å¹´çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ"

# 4. æ‰§è¡Œé˜²å¾¡æ€§è°ƒç”¨
try:
    completion = client.chat.completions.create(
        model="qwen-plus",
        messages=[{"role": "user", "content": prompt}],
        temperature=0  # ä¸¥è°¨æ¨¡å¼
    )
    
    # 5. å®‰å…¨æå–ï¼šé˜²å¾¡æ€§ç¼–ç¨‹
    if completion and completion.choices:
        print(completion.choices[0].message.content)
        
except Exception as e:
    print(f"è¯·æ±‚å¤±è´¥ï¼š{e}")
```
## è¿åŠ¨å¥èº«
ä»Šæ—¥å·²åšæŒï¼Œä¿¯å§æ’‘+è¾…åŠ©å¼•ä½“å‘ä¸Šå››ç»„+æœ‰æ°§çˆ¬å¡åŠå°æ—¶

## æ˜æ—¥è®¡åˆ’
* **1ã€ç»§ç»­RAGçš„å­¦ä¹ **ï¼šå¦‚æœæ–‡æ¡£æœ‰å‡ ä¸‡ä¸ªå­—æ€ä¹ˆåŠï¼Œä¸èƒ½ç›´æ¥ç”¨f.read(),åº”è¯¥æ€ä¹ˆå¤„ç†ã€‚**é•¿æ–‡æœ¬åˆ‡åˆ†ï¼ˆChunkingï¼‰**ã€‚
* **2ã€ç»§ç»­åšæŒè¿åŠ¨**ï¼šåŒä¸Šã€‚
* **3ã€å¼€å§‹è‹±è¯­å­¦ä¹ **
* **3ã€ç»§ç»­åšæŒå†™å­¦ä¹ æ—¥å¿—**
